# Sync worker container for builder trades -> backend ingestion
# Uses Bun to run frontend/scripts/sync_builder_trades.ts

FROM oven/bun:1.3 as base

WORKDIR /app/frontend

# Install deps (frontend holds the Polymarket SDK deps)
COPY package.json bun.lock ./
# Lockfile may differ per environment; do not freeze to avoid build failure
RUN bun install

# Copy frontend code (includes scripts/)
COPY . .

# Default command runs the sync job once; Railway cron can invoke this image on a schedule
CMD ["bun", "run", "scripts/sync_builder_trades.ts"]
